/* Import czcionki */
@import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap');

:root {
    /* --- Paleta Wody (Aqua) --- */
    --aqua-deep-bg: #0d3c4f;
    --aqua-mid: #1a7a8c;
    --aqua-light: #65c8d0;
    --aqua-glass-bg: rgba(26, 122, 140, 0.4);
    --aqua-highlight: #a2f3ef;
    --aqua-text-light: #f0f8ff; /* Jasny tekst wodny */
    --aqua-text-dark: #1f3a44; /* Ciemny tekst wodny (dla jasnego tła) */
    --aqua-results-bg: #e8f4f8; /* Jasne tło wyników wodne */
    --aqua-reset-main: #8a4fff; /* Fiolet wodny */
    --aqua-reset-dark: #4a1a9c;
    --aqua-shadow: rgba(0, 92, 122, 0.3);

    /* --- Paleta Żaru (Fire) --- */
    --fire-deep-bg: #4d0000;   /* Głęboka czerwień / bordo tła */
    --fire-mid: #ff4500;     /* Pomarańczowo-czerwony */
    --fire-light: #ffcc33;   /* Jasny żółty/złoty */
    --fire-glass-bg: rgba(255, 69, 0, 0.3); /* Pomarańczowe szkło */
    --fire-highlight: #fffacd; /* Bardzo jasny żółty (LemonChiffon) */
    --fire-text-light: #fff8e1; /* Ciepły biały tekst (Cornsilk) */
    --fire-text-dark: #6b2a00;  /* Ciemny brązowy tekst */
    --fire-results-bg: #fff0e1; /* Bardzo jasne tło wyników ogniste (PapayaWhip light) */
    --fire-reset-main: #b22222; /* Ciemna czerwień ognista (Firebrick) */
    --fire-reset-dark: #800000; /* Maroon */
    --fire-shadow: rgba(200, 50, 50, 0.4);

    /* --- Wspólne --- */
    --blur-intensity: 8px;
    --animation-duration: 20s; /* Czas trwania jednego cyklu Aqua -> Fire */
}

/* --- Główna Animacja Zmiany Kolorów --- */
@keyframes colorShift {
    0% {
        /* Stan Aqua */
        --current-deep-bg: var(--aqua-deep-bg);
        --current-mid: var(--aqua-mid);
        --current-light: var(--aqua-light);
        --current-glass-bg: var(--aqua-glass-bg);
        --current-highlight: var(--aqua-highlight);
        --current-text-light: var(--aqua-text-light);
        --current-text-dark: var(--aqua-text-dark);
        --current-results-bg: var(--aqua-results-bg);
        --current-reset-main: var(--aqua-reset-main);
        --current-reset-dark: var(--aqua-reset-dark);
        --current-action-main: var(--aqua-mid); /* Przycisk $100 zaczyna jako aqua */
        --current-action-dark: var(--aqua-deep-bg);
        --current-focus-glow: var(--aqua-highlight); /* Poświata focusa */
        --current-shadow: var(--aqua-shadow);
    }
    100% {
        /* Stan Fire */
        --current-deep-bg: var(--fire-deep-bg);
        --current-mid: var(--fire-mid);
        --current-light: var(--fire-light);
        --current-glass-bg: var(--fire-glass-bg);
        --current-highlight: var(--fire-highlight);
        --current-text-light: var(--fire-text-light);
        --current-text-dark: var(--fire-text-dark);
        --current-results-bg: var(--fire-results-bg);
        --current-reset-main: var(--fire-reset-main);
        --current-reset-dark: var(--fire-reset-dark);
        --current-action-main: var(--ember-orange); /* Przycisk $100 kończy jako fire */
        --current-action-dark: var(--ember-red);
        --current-focus-glow: var(--ember-orange); /* Poświata focusa */
        --current-shadow: var(--fire-shadow);
    }
}

/* === Aplikacja Animacji === */
body {
    /* ... (fonty, line-height itp. jak wcześniej) ... */
    color: var(--current-text-light); /* Używamy zmiennej animowanej */
    background: linear-gradient(135deg, var(--current-deep-bg), var(--current-mid), var(--current-light));
    background-size: 300% 300%;
    animation:
        colorShift var(--animation-duration) ease-in-out infinite alternate, /* Główna animacja kolorów */
        flowBackground 15s ease infinite; /* Dodatkowe płynięcie gradientu tła */
    min-height: 100vh;
    overflow-x: hidden;
}

.container {
    /* ... (layout, max-width, margin jak wcześniej) ... */
    background: var(--current-glass-bg); /* Animowane tło szkła */
    backdrop-filter: blur(var(--blur-intensity));
    -webkit-backdrop-filter: blur(var(--blur-intensity));
    border-radius: 35px;
    padding: 30px 35px;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.2); /* Ramka może pozostać stała lub też animowana */
    position: relative;
    overflow: hidden;
    /* Ważne: Container musi mieć dostęp do animowanych zmiennych */
    animation: colorShift var(--animation-duration) ease-in-out infinite alternate;
    animation-play-state: inherit; /* Synchronizuj z body */
}

h1 {
    /* ... (text-align, font-size itp.) ... */
    /* Gradient animowany przez zmienne */
    background: linear-gradient(to right, var(--current-light), var(--current-highlight), var(--current-text-light));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
     /* Potrzebuje dostępu do zmiennych */
    animation: colorShift var(--animation-duration) ease-in-out infinite alternate;
    animation-play-state: inherit;
}

#denominations-list { margin-bottom: 25px; }

.denomination-row {
    /* ... (display, padding, gap itp.) ... */
    background-color: rgba(255, 255, 255, 0.03); /* Statyczne lekkie tło */
    border-radius: 15px; margin-bottom: 8px;
    transition: background-color 0.3s ease;
    /* Potrzebuje dostępu do zmiennych dla koloru tekstu etykiety */
     animation: colorShift var(--animation-duration) ease-in-out infinite alternate;
     animation-play-state: inherit;
}
.denomination-row:hover { background-color: rgba(255, 255, 255, 0.08); }

.denomination-label {
    /* ... (flex-basis, font-weight itp.) ... */
    color: var(--current-text-light); /* Animowany kolor tekstu */
    font-size: 1rem; margin-bottom: 10px; padding-left: 10px;
}

.inputs-container { /* Bez zmian w animacji */ }

.quantity-input {
    /* ... (padding, border-radius, text-align itp.) ... */
    background-color: rgba(0, 0, 0, 0.3); /* Statyczne ciemne tło */
    color: var(--current-text-light); /* Animowany kolor tekstu */
    box-shadow: inset 1px 1px 3px rgba(0, 0, 0, 0.2);
    transition: box-shadow 0.3s ease, background-color 0.3s ease;
    min-height: 46px; outline: none;
    /* Potrzebuje dostępu do zmiennych */
     animation: colorShift var(--animation-duration) ease-in-out infinite alternate;
     animation-play-state: inherit;
}
.quantity-input::placeholder { color: rgba(240, 248, 255, 0.6); opacity: 1; } /* Można by też animować, ale to skomplikowane */
.quantity-input::-webkit-outer-spin-button,
.quantity-input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }

.quantity-input:focus {
    background-color: rgba(0, 0, 0, 0.4);
    /* Animowana poświata używająca zmiennej --current-focus-glow */
    box-shadow: 0 0 10px 4px var(--current-focus-glow), inset 1px 1px 3px rgba(0, 0, 0, 0.2);
    /* Usunięto osobną animację glow, cień zmienia się z główną animacją */
}

.roll-input-container { /* Bez zmian */ }
.roll-label {
    /* ... */
    color: var(--current-text-light); /* Animowany kolor */
    opacity: 0.8;
     /* Potrzebuje dostępu do zmiennych */
    animation: colorShift var(--animation-duration) ease-in-out infinite alternate;
    animation-play-state: inherit;
}
.roll-input { /* Bez zmian */ }

.subtotal {
    /* ... (layout, font-weight itp.) ... */
    color: var(--current-highlight); /* Animowany kolor highlightu */
    font-size: 1.1rem; padding-left: 10px; align-self: center; margin: 0;
    white-space: nowrap;
    text-shadow: 0 0 6px color-mix(in srgb, var(--current-highlight) 50%, transparent); /* Animowana poświata */
     /* Potrzebuje dostępu do zmiennych */
     animation: colorShift var(--animation-duration) ease-in-out infinite alternate;
     animation-play-state: inherit;
}

/* Animacja aktualizacji Flash - bez zmian */
@keyframes flashUpdate { /* ... */ }
.subtotal.updated, #grand-total.updated { animation: flashUpdate 0.6s ease-out; }

.total-section {
    /* ... (margin, padding, border-radius itp.) ... */
    background: linear-gradient(145deg, var(--current-reset-main), var(--current-action-main)); /* Animowany gradient */
    text-align: center; color: var(--current-text-light);
    box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.25), 0 6px 20px rgba(0, 0, 0, 0.2);
    position: relative; overflow: hidden;
     /* Potrzebuje dostępu do zmiennych */
     animation: colorShift var(--animation-duration) ease-in-out infinite alternate;
     animation-play-state: inherit;
}
.total-section h2 { /* ... */ color: var(--current-text-light); /* Animowany */ }
#grand-total {
    /* ... */ color: var(--current-text-light); /* Animowany */
    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
     /* Potrzebuje dostępu do zmiennych */
     animation: colorShift var(--animation-duration) ease-in-out infinite alternate;
     animation-play-state: inherit;
}

.withdrawal-section { /* Bez zmian */ }

.withdrawal-results-display {
    /* ... (padding, border-radius itp.) ... */
    background-color: var(--current-results-bg); /* Animowane tło */
    color: var(--current-text-dark); /* Animowany ciemny tekst */
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    border: 1px solid rgba(0, 0, 0, 0.05);
    /* ... (reszta stylów dla widoczności/animacji wejścia) ... */
     /* Potrzebuje dostępu do zmiennych */
     animation: colorShift var(--animation-duration) ease-in-out infinite alternate;
     animation-play-state: inherit;
}
/* ... (style dla .visible / :not(.visible)) ... */
.withdrawal-results-display h3 { /* ... */ color: var(--current-reset-main); /* Animowany kolor nagłówka */ }
.withdrawal-results-display p { /* ... */ color: var(--current-text-dark); /* Animowany kolor tekstu */ }

/* Przyciski */
#calculate-100-button,
#reset-button {
    /* ... (display, padding, border-radius itp.) ... */
    color: var(--current-text-light);
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
    transition: transform 0.2s ease-out, filter 0.2s ease-out; /* Usunięto transition dla tła/cienia */
    min-height: 50px; position: relative; overflow: hidden;
     /* Potrzebuje dostępu do zmiennych */
     animation: colorShift var(--animation-duration) ease-in-out infinite alternate;
     animation-play-state: inherit;
}

#calculate-100-button {
    background: linear-gradient(135deg, var(--current-action-main), var(--current-action-dark)); /* Animowany gradient */
    box-shadow: 0 5px 15px color-mix(in srgb, var(--current-action-dark) 50%, transparent); /* Animowany cień */
    font-size: 1.1em;
}
#reset-button {
     background: linear-gradient(135deg, var(--current-reset-main), var(--current-reset-dark)); /* Animowany gradient */
     box-shadow: 0 5px 15px color-mix(in srgb, var(--current-reset-dark) 40%, transparent); /* Animowany cień */
     font-size: 1rem; margin-bottom: 0;
}

/* Stany hover/active dla przycisków - działają niezależnie od animacji kolorów */
#calculate-100-button:hover,
#reset-button:hover {
    transform: translateY(-2px) scale(1.01);
    filter: brightness(1.15);
}
#calculate-100-button:active,
#reset-button:active {
    transform: translateY(1px) scale(0.98);
    filter: brightness(0.9);
}


/* Media query bez zmian w logice, ale elementy wewnątrz też potrzebują dostępu do animacji */
@media (min-width: 600px) {
    /* ... (dostosowania layoutu jak wcześniej) ... */
    /* Upewnij się, że elementy stylizowane tylko tutaj też mają animację, jeśli to konieczne */
}